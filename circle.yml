machine:
  java:
    version: oraclejdk8

dependencies:
  pre:
    - "sudo apt-get update; sudo apt-get install -y git; sudo git clone https://www.github.com/P-H-C/phc-winner-argon2.git argon2-src; cd argon2-src; sudo make; sudo make install"
  override:
    - mvn -DskipTests clean install dependency:resolve-plugins dependency:go-offline

test:
  override:
    - mvn -o surefire:test
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - find . -type f -regex ".*/target/surefire-reports/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;

notify:
  webhooks:
    - url: https://discordapp.com/api/webhooks/408312347388674048/Tv5q5C1Hyn-QnDis4GT0A2jlFtJ_n1Dw3R9LGIxLCNaZd7BuCKvPWIQSY-yHm9N_RCUi/slack
